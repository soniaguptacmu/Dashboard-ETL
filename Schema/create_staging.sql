CREATE TABLE content_contentnode (id char(32) NOT NULL PRIMARY KEY, title varchar(200) NOT NULL , content_id char(32) NOT NULL, description varchar(400) NULL, sort_order real NULL, license_owner varchar(200) NOT NULL, author varchar(200) NOT NULL, kind varchar(200) NOT NULL, available bool NOT NULL, stemmed_metaphone varchar(1800) NOT NULL, lft integer unsigned NOT NULL, rght integer unsigned NOT NULL, tree_id integer unsigned NOT NULL, level integer unsigned NOT NULL, license_id integer NULL REFERENCES content_license (id), parent_id char(32) NULL REFERENCES content_contentnode (id))character set utf8 collate utf8_general_ci;
CREATE TABLE content_assessmentmetadata (id char(32) NOT NULL PRIMARY KEY, assessment_item_ids text NOT NULL, number_of_assessments integer NOT NULL, mastery_model text NOT NULL, randomize bool NOT NULL, is_manipulable bool NOT NULL, contentnode_id char(32) NULL REFERENCES content_contentnode (id));
CREATE TABLE kolibriauth_facilitydataset (id char(32) NOT NULL PRIMARY KEY, _morango_dirty_bit bool NOT NULL, _morango_source_id varchar(96) NOT NULL, _morango_partition varchar(128) NOT NULL, description text NOT NULL, location varchar(200) NOT NULL, learner_can_edit_username bool NOT NULL, learner_can_edit_name bool NOT NULL, learner_can_edit_password bool NOT NULL, learner_can_sign_up bool NOT NULL, learner_can_delete_account bool NOT NULL);
CREATE TABLE kolibriauth_collection (id char(32) NOT NULL PRIMARY KEY, _morango_dirty_bit bool NOT NULL, _morango_source_id varchar(96) NOT NULL, _morango_partition varchar(128) NOT NULL, name varchar(100) NOT NULL, kind varchar(20) NOT NULL, lft integer unsigned NOT NULL, rght integer unsigned NOT NULL, tree_id integer unsigned NOT NULL, level integer unsigned NOT NULL, dataset_id char(32) NOT NULL REFERENCES kolibriauth_facilitydataset (id), parent_id char(32) NULL REFERENCES kolibriauth_collection (id));
CREATE TABLE kolibriauth_role (id char(32) NOT NULL PRIMARY KEY, _morango_dirty_bit bool NOT NULL, _morango_source_id varchar(96) NOT NULL, _morango_partition varchar(128) NOT NULL, kind varchar(20) NOT NULL, collection_id char(32) NOT NULL REFERENCES kolibriauth_collection (id), dataset_id char(32) NOT NULL REFERENCES kolibriauth_facilitydataset (id), user_id char(32) NOT NULL REFERENCES kolibriauth_facilityuser (id));
CREATE TABLE kolibriauth_membership (id char(32) NOT NULL PRIMARY KEY, _morango_dirty_bit bool NOT NULL, _morango_source_id varchar(96) NOT NULL, _morango_partition varchar(128) NOT NULL, collection_id char(32) NOT NULL REFERENCES kolibriauth_collection (id), dataset_id char(32) NOT NULL REFERENCES kolibriauth_facilitydataset (id), user_id char(32) NOT NULL REFERENCES kolibriauth_facilityuser (id));
CREATE TABLE kolibriauth_facilityuser (password varchar(128) NOT NULL, last_login datetime NULL, id char(32) NOT NULL PRIMARY KEY, _morango_dirty_bit bool NOT NULL, _morango_source_id varchar(96) NOT NULL, _morango_partition varchar(128) NOT NULL, username varchar(30) NOT NULL, full_name varchar(120) NOT NULL, date_joined datetime NOT NULL, dataset_id char(32) NOT NULL REFERENCES kolibriauth_facilitydataset (id), facility_id char(32) NOT NULL REFERENCES kolibriauth_collection (id));
CREATE TABLE logger_contentsessionlog (id char(32) NOT NULL PRIMARY KEY, _morango_dirty_bit bool NOT NULL, _morango_source_id varchar(96) NOT NULL, _morango_partition varchar(128) NOT NULL, content_id char(32) NOT NULL, channel_id char(32) NOT NULL, start_timestamp datetime NOT NULL, end_timestamp datetime NULL, time_spent real NOT NULL, progress real NOT NULL, kind varchar(200) NOT NULL, extra_fields text NOT NULL, dataset_id char(32) NOT NULL REFERENCES kolibriauth_facilitydataset (id), user_id char(32) NULL REFERENCES kolibriauth_facilityuser (id));
CREATE TABLE logger_contentsummarylog (id char(32) NOT NULL PRIMARY KEY, _morango_dirty_bit bool NOT NULL, _morango_source_id varchar(96) NOT NULL, _morango_partition varchar(128) NOT NULL, content_id char(32) NOT NULL, channel_id char(32) NOT NULL, start_timestamp datetime NOT NULL, end_timestamp datetime NULL, completion_timestamp datetime NULL, time_spent real NOT NULL, progress real NOT NULL, kind varchar(200) NOT NULL, extra_fields text NOT NULL, dataset_id char(32) NOT NULL REFERENCES kolibriauth_facilitydataset (id), user_id char(32) NOT NULL REFERENCES kolibriauth_facilityuser (id));
CREATE TABLE logger_masterylog (id char(32) NOT NULL PRIMARY KEY, _morango_dirty_bit bool NOT NULL, _morango_source_id varchar(96) NOT NULL, _morango_partition varchar(128) NOT NULL, mastery_criterion text NOT NULL, start_timestamp datetime NOT NULL, end_timestamp datetime NULL, completion_timestamp datetime NULL, mastery_level integer NOT NULL, complete bool NOT NULL, dataset_id char(32) NOT NULL REFERENCES kolibriauth_facilitydataset (id), summarylog_id char(32) NOT NULL REFERENCES logger_contentsummarylog (id), user_id char(32) NOT NULL REFERENCES kolibriauth_facilityuser (id));
CREATE TABLE logger_attemptlog (id char(32) NOT NULL PRIMARY KEY, _morango_dirty_bit bool NOT NULL, _morango_source_id varchar(96) NOT NULL, _morango_partition varchar(128) NOT NULL, item varchar(200) NOT NULL, start_timestamp datetime NOT NULL, end_timestamp datetime NOT NULL, completion_timestamp datetime NULL, time_spent real NOT NULL, complete bool NOT NULL, correct real NOT NULL, hinted bool NOT NULL, answer text NULL, simple_answer varchar(200) NOT NULL, interaction_history text NOT NULL, dataset_id char(32) NOT NULL REFERENCES kolibriauth_facilitydataset (id), masterylog_id char(32) NULL REFERENCES logger_masterylog (id), sessionlog_id char(32) NOT NULL REFERENCES logger_contentsessionlog (id), user_id char(32) NULL REFERENCES kolibriauth_facilityuser (id));